---
resources:
- name: ci-image
  type: registry-image
  source:
    repository: busybox
- name: automation
  type: git
  icon: github
  source:
    uri: https://github.com/emmanuelguerin/deploy-automation
    branch: ((source_branch))
jobs:
  - name: deploy
    plan:
    - get: automation
      trigger: true
    - get: ci-image
    - task: deploy
      params:
        COLOR: ((color))
        ENV_NAME: ((env-name))
        VERSION: ((component-version))
      image: ci-image
      config:
        platform: linux
        run:
          path: sh
          args:
            - "-c"
            - |
              echo "Values: $COLOR $ENV_NAME $VERSION"
              sleep 10
              echo "deploy"
